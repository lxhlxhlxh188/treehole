(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e29b554"],{a493:function(e,t,s){"use strict";s("da3c")},da3c:function(e,t,s){},f539:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"bg"},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:10}},[s("el-card",{staticClass:"box-card",staticStyle:{padding:"30px 10px"}},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form",{attrs:{"label-width":"80px",model:e.user}},[s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),s("el-form-item",{attrs:{label:"生日"}},[s("el-input",{model:{value:e.user.birthday,callback:function(t){e.$set(e.user,"birthday",t)},expression:"user.birthday"}})],1),s("el-form-item",{attrs:{label:"电话"}},[s("el-input",{model:{value:e.user.telephone,callback:function(t){e.$set(e.user,"telephone",t)},expression:"user.telephone"}})],1),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("el-form-item",{attrs:{label:"所在城市"}},[s("el-select",{model:{value:e.user.area,callback:function(t){e.$set(e.user,"area",t)},expression:"user.area"}},[s("el-option",{attrs:{value:"广东"}}),s("el-option",{attrs:{value:"北京"}}),s("el-option",{attrs:{value:"上海"}}),s("el-option",{attrs:{value:"天津"}}),s("el-option",{attrs:{value:"重庆"}}),s("el-option",{attrs:{value:"内蒙古"}}),s("el-option",{attrs:{value:"广西"}}),s("el-option",{attrs:{value:"西藏"}}),s("el-option",{attrs:{value:"宁夏"}}),s("el-option",{attrs:{value:"新疆"}}),s("el-option",{attrs:{value:"香港特别行政区"}}),s("el-option",{attrs:{value:"澳门特别行政区"}}),s("el-option",{attrs:{value:"河北"}}),s("el-option",{attrs:{value:"山西"}}),s("el-option",{attrs:{value:"辽宁"}}),s("el-option",{attrs:{value:"吉林"}}),s("el-option",{attrs:{value:"黑龙江"}}),s("el-option",{attrs:{value:"江苏"}}),s("el-option",{attrs:{value:"浙江"}}),s("el-option",{attrs:{value:"安徽"}}),s("el-option",{attrs:{value:"福建"}}),s("el-option",{attrs:{value:"江西"}}),s("el-option",{attrs:{value:"山东"}}),s("el-option",{attrs:{value:"河南"}}),s("el-option",{attrs:{value:"湖北"}}),s("el-option",{attrs:{value:"湖南"}}),s("el-option",{attrs:{value:"海南"}}),s("el-option",{attrs:{value:"四川"}}),s("el-option",{attrs:{value:"贵州"}}),s("el-option",{attrs:{value:"云南"}}),s("el-option",{attrs:{value:"陕西"}}),s("el-option",{attrs:{value:"甘肃"}}),s("el-option",{attrs:{value:"青海"}}),s("el-option",{attrs:{value:"台湾"}})],1)],1)],1),s("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){return e.UpdateUser()}}},[e._v("修改")]),s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleCancle()}}},[e._v("返回")])],1)],1)],1)],1)],1)],1)])},r=[],l=s("b775"),o={data(){return{user:{id:this.$route.params.id,username:"",birthday:"",telephone:"",password:"",area:""},oldUsername:""}},methods:{handleCancle(){window.history.back(-1)},getCookie(e){var t,s=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(s))?unescape(t[2]):null},delCookie(e){var t=new Date;t.setTime(t.getTime()-1);var s=this.getCookie(e);null!=s&&(document.cookie=e+"="+s+";expires="+t.toGMTString())},UpdateUser(){if(0==this.user.username.length)return void this.$message.error("昵称不能为空");if(this.user.username.length>10)return void this.$message.error("昵称长度不能超过10个字符");let e=/\d{4}-\d{1,2}-\d{1,2}/;if(!e.test(this.user.birthday))return void this.$message.error("生日日期格式有错误，请检查");let t=/(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}/;t.test(this.user.telephone)?0!=this.user.password.length?l["a"].post("/updateUser",{id:this.user.id,username:this.user.username,birthday:this.user.birthday,telephone:this.user.telephone,password:this.user.password,area:this.user.area}).then(e=>{200==e.data.status?(this.$message.success("个人信息修改成功"),this.user.username!=this.oldUsername&&(this.$message.warning("修改了用户名，请重新登录"),this.delCookie("currentUserID"),this.delCookie("token"),this.$router.push("/user/login"))):this.$message.error("个人信息修改失败")}):this.$message.error("密码不能为空"):this.$message.error("请输入正确的手机号")}},mounted(){function e(e){var t,s=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(s))?unescape(t[2]):null}l["a"].get("/getUserByID/"+e("currentUserID")).then(e=>{console.log(e),this.user=e.data.data,this.user.birthday=new Date(this.user.birthday).getFullYear()+"-"+(new Date(this.user.birthday).getMonth()+1)+"-"+new Date(this.user.birthday).getMonth(),this.oldUsername=e.data.data.username})}},n=o,i=(s("a493"),s("2877")),u=Object(i["a"])(n,a,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2e29b554.30bd09dd.js.map